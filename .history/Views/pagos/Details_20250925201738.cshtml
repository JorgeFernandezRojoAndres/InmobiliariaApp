@model InmobiliariaApp.Models.Pago

@{
    ViewData["Title"] = "Detalles del Pago";
}

<h2 class="mb-4">üíµ Detalles del Pago</h2>

<div class="card shadow-sm">
    <div class="card-body">
        <h4 class="card-title">Pago #@Model.Id</h4>
        <hr />

        <p><strong>Contrato:</strong> @Model.ContratoDescripcion</p>
        <p><strong>Fecha:</strong> @Model.FechaPago.ToShortDateString()</p>
        <p><strong>Detalle:</strong> @Model.Detalle</p>
        <p><strong>Importe:</strong> @Model.Importe.ToString("C")</p>

        <!-- üîπ Secci√≥n de Auditor√≠a: solo visible para administradores -->
        @if (User.IsInRole("Administrador"))
        {
            <hr />
            <h5>üõ°Ô∏è Auditor√≠a</h5>
            <dl class="row">
                <dt class="col-sm-3">Creado por</dt>
                <dd class="col-sm-9">
                    @(Model.CreadoPor != null 
                        ? $"{Model.CreadoPor.Nombre} {Model.CreadoPor.Apellido}" 
                        : $"Usuario ID {Model.CreadoPorId}")
                </dd>

                @if (Model.AnuladoPorId.HasValue)
                {
                    <dt class="col-sm-3">Anulado por</dt>
                    <dd class="col-sm-9">
                        @(Model.AnuladoPor != null 
                            ? $"{Model.AnuladoPor.Nombre} {Model.AnuladoPor.Apellido}" 
                            : $"Usuario ID {Model.AnuladoPorId}")
                    </dd>
                }
            </dl>
        }
    </div>
</div>

<div class="mt-3">
    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">‚úèÔ∏è Editar</a>
    <a asp-action="Index" class="btn btn-secondary">‚¨ÖÔ∏è Volver</a>
</div>
